{"ast":null,"code":"var _jsxFileName = \"D:\\\\Work\\\\Projects\\\\e-commerce\\\\front-end\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Body from './container/Body/body';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isAuth: false,\n      token: null,\n      userId: null\n    };\n\n    this.signupHandler = adminData => {\n      console.log(adminData);\n      fetch('http://localhost:8080/signup/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: adminData.email,\n          password: adminData.password,\n          name: adminData.name\n        })\n      }).then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('create admin failed');\n        }\n\n        return res.json();\n      }).then(resData => {\n        console.log(resData);\n      }).catch(err => {\n        console.log(err);\n      });\n      this.props.history.replace('/home');\n    };\n\n    this.loginHandler = loginData => {\n      console.log(loginData);\n      fetch('http://localhost:8080/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: loginData.email,\n          password: loginData.password\n        })\n      }).then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Login failed');\n        }\n\n        return res.json();\n      }).then(resData => {\n        console.log(resData);\n        this.setState({\n          isAuth: true,\n          token: resData.token\n        });\n        localStorage.setItem('token', resData.token);\n        localStorage.setItem('adminId', resData.adminId);\n        const remainingMilliseconds = 60 * 60 * 1000;\n        const expiryDate = new Date(new Date().getTime() + remainingMilliseconds);\n        localStorage.setItem('expiryDate', expiryDate.toISOString());\n        this.setAutoLogout(remainingMilliseconds);\n      });\n      this.props.history.push(\"/\");\n    };\n\n    this.setAutoLogout = milliseconds => {\n      setTimeout(() => {\n        this.logoutHandler();\n      }, milliseconds);\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(Auxiliary, {\n        children: [/*#__PURE__*/_jsxDEV(Header, {\n          isAuth: this.state.isAuth\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(SideBar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/\",\n            exact: true,\n            render: props => /*#__PURE__*/_jsxDEV(Shop, { ...props,\n              addToCart: this.addToCartHandler,\n              editHandler: this.editHandler,\n              delete: this.deleteHandler,\n              isAuth: this.state.isAuth,\n              products: this.state.products\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 53\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/add-product\",\n            render: props => /*#__PURE__*/_jsxDEV(AddProductForm, {\n              editMode: false,\n              ...props,\n              isAuth: this.state.isAuth,\n              clicked: this.addProductHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 57\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/product/:prodId\",\n            exact: true,\n            render: props => /*#__PURE__*/_jsxDEV(ProductView, { ...props\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 65\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/edit-product\",\n            render: props => /*#__PURE__*/_jsxDEV(AddProductForm, {\n              clickedEdit: this.clickedEditHandler,\n              product: this.state.selectedProduct,\n              editMode: true,\n              ...props,\n              isAuth: this.state.isAuth\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 57\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/Cart\",\n            render: props => /*#__PURE__*/_jsxDEV(Cart, {\n              remove: this.removeFromCartHandler,\n              quantityHandler: this.quantityHandler,\n              cart: this.state.cart,\n              ...props\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 48\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/Checkout\",\n            render: props => /*#__PURE__*/_jsxDEV(Checkout, { ...props,\n              cart: this.state.cart,\n              clicked: this.addOrderHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 53\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Body, {\n            path: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/signup\",\n            render: () => /*#__PURE__*/_jsxDEV(Signup, {\n              clicked: this.signupHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/login\",\n            render: props => /*#__PURE__*/_jsxDEV(Login, { ...props,\n              clicked: this.loginHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 50\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 8\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["D:/Work/Projects/e-commerce/front-end/src/App.js"],"names":["React","Component","Body","App","state","isAuth","token","userId","signupHandler","adminData","console","log","fetch","method","headers","body","JSON","stringify","email","password","name","then","res","status","Error","json","resData","catch","err","props","history","replace","loginHandler","loginData","setState","localStorage","setItem","adminId","remainingMilliseconds","expiryDate","Date","getTime","toISOString","setAutoLogout","push","milliseconds","setTimeout","logoutHandler","render","addToCartHandler","editHandler","deleteHandler","products","addProductHandler","clickedEditHandler","selectedProduct","removeFromCartHandler","quantityHandler","cart","addOrderHandler"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport './App.css';\nimport Body from './container/Body/body';\n\nclass App extends Component {\n\nstate={\n    isAuth: false,\n    token: null,\n    userId: null,\n}\n\nsignupHandler=(adminData)=>{\n  console.log(adminData)\n  fetch('http://localhost:8080/signup/',{\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n\n      email: adminData.email,\n      password: adminData.password,\n      name: adminData.name\n\n    })\n  }).then(res=>{\n    if(res.status!==200 && res.status!==201)\n    {\n      throw new Error('create admin failed')\n    \n    }\n    return res.json();\n}).then(resData=>{\n  console.log(resData)\n  \n}).catch(err=>{\n  console.log(err)\n})\nthis.props.history.replace('/home')\n}\n\nloginHandler=(loginData)=>{\n\n  console.log(loginData)\n  fetch('http://localhost:8080/login',{\n    method: 'POST',\n    headers:{\n      'Content-Type' : 'application/json'\n    },\n    body: JSON.stringify({\n      email: loginData.email,\n      password: loginData.password\n    })\n  }).then(res=>{\n    if(res.status!==200 && res.status !==201){\n      throw new Error('Login failed')\n    }\n    return res.json()\n  }).then(resData=>{\n   console.log(resData)\n    this.setState({\n      isAuth: true,\n      token: resData.token\n\n    })\n    localStorage.setItem('token', resData.token);\n    localStorage.setItem('adminId', resData.adminId)\n    const remainingMilliseconds = 60 * 60 * 1000;\n    const expiryDate = new Date(\n      new Date().getTime() + remainingMilliseconds\n    );\n    localStorage.setItem('expiryDate', expiryDate.toISOString());\n    this.setAutoLogout(remainingMilliseconds);\n\n  })\n \n  this.props.history.push(\"/\")\n\n}\nsetAutoLogout = milliseconds => {\n  setTimeout(() => {\n    this.logoutHandler();\n  }, milliseconds);\n};\n\n\n  render(){\n\n\n  return (\n    <div className=\"App\">\n       <Auxiliary>\n        <Header isAuth={this.state.isAuth}/>\n        <SideBar />\n        <Switch>\n           <Route path='/' exact render={(props) => <Shop {...props}  addToCart={this.addToCartHandler} editHandler={this.editHandler} delete={this.deleteHandler} isAuth={this.state.isAuth} products={this.state.products}/>}/>\n           <Route path=\"/add-product\" render={(props) =><AddProductForm editMode={false} {...props}  isAuth={this.state.isAuth} clicked={this.addProductHandler} />}/>\n          <Route path=\"/product/:prodId\" exact render={(props)=><ProductView {...props} />   }></Route>\n          <Route path='/edit-product'  render={(props)=><AddProductForm clickedEdit ={this.clickedEditHandler} product={this.state.selectedProduct} editMode={true} {...props} isAuth={this.state.isAuth}/>}/>\n          <Route path='/Cart' render={(props)=><Cart remove={this.removeFromCartHandler} quantityHandler={this.quantityHandler} cart={this.state.cart} {...props}/>}/>\n          <Route path='/Checkout'  render={(props)=><Checkout  {...props} cart={this.state.cart} clicked={this.addOrderHandler}/>}/>\n          <Body path />\n           <Route path=\"/signup\" render={() =><Signup  clicked={this.signupHandler}/>}/>\n          <Route path=\"/login\" render={(props) =><Login {...props}  clicked={this.loginHandler}/>}/>\n       \n     </Switch>\n      </Auxiliary>\n        \n    </div>\n  );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
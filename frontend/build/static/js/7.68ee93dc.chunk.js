(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[7],{56:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var c=r(25);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],c=!0,s=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(c=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);c=!0);}catch(i){s=!0,n=i}finally{try{c||null==a.return||a.return()}finally{if(s)throw n}}return r}}(e,t)||Object(c.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},65:function(e,t,r){},72:function(e,t,r){"use strict";r.r(t);var c=r(56),s=r(1),n=(r(65),r(19)),o=r(0);t.default=function(e){var t=Object(s.useState)([]),r=Object(c.a)(t,2),a=r[0],i=r[1],l=Object(s.useState)(!1),d=Object(c.a)(l,2),u=d[0],h=d[1],j=localStorage.getItem("token");Object(s.useEffect)((function(){h(!0),fetch("https://mrfood-mernapp.herokuapp.com/get-orders",{headers:{Authorization:"Bearer "+j}}).then((function(t){if(console.log(e.token),401===t.status)throw e.history.replace("/"),new Error("You are unauthorized!");if(500===t.status)throw new Error("An error occured!");if(200!==t.status&&201!==t.status)throw new Error("Could not fetch Orders");return t.json()})).then((function(e){console.log(e),i(e.orders),h(!1)})).catch((function(t){console.log(t),i([]),e.catchError(t),h(!1)}))}),[j]);var b,m=function(t){h(!0),fetch("https://mrfood-mernapp.herokuapp.com/"+"delete-order/".concat(t),{method:"DELETE",headers:{Authorization:"Bearer "+e.token}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Delete product failed");return e.json()})).then((function(e){console.log(e);var r=a.filter((function(e){return e._id!==t}));i(r),h(!1)})).catch((function(t){console.log(t),h(!1),e.catchError(t)}))};return u?Object(o.jsx)(n.a,{asOverlay:!0}):0===a.length?Object(o.jsx)("h1",{children:"No orders"}):(b=a.map((function(e){console.log(e.orderItems.items);var t=e.orderItems.items.map((function(e){return Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"product",children:[Object(o.jsx)("div",{className:"product-details",children:Object(o.jsx)("div",{className:"product-title",children:e.product.title})}),Object(o.jsx)("div",{className:"product-price",children:e.product.price}),Object(o.jsx)("div",{className:"product-quantity",children:e.quantity}),Object(o.jsx)("div",{className:"product-line-price",children:e.product.price*e.quantity})]})},e.product._id)}));return Object(o.jsxs)("li",{className:"orders__item",children:[Object(o.jsxs)("h3",{children:["Order - ",e._id]}),Object(o.jsxs)("h3",{children:[" Name: ",e.name]}),Object(o.jsxs)("h3",{children:[" Adress: ",e.address]}),Object(o.jsxs)("h3",{children:["Time: ",e.time]}),Object(o.jsxs)("ul",{className:"orders__products-item",children:[Object(o.jsxs)("div",{className:"column-labels",children:[Object(o.jsx)("label",{className:"product-details",children:"Product"}),Object(o.jsx)("label",{className:"product-price",children:"Price"}),Object(o.jsx)("label",{className:"product-quantity",children:"Quantity"}),Object(o.jsx)("label",{className:"product-line-price",children:"Total"})]}),t]}),Object(o.jsxs)("div",{className:"totals-item",children:[Object(o.jsx)("label",{children:"Subtotal"}),Object(o.jsx)("div",{className:"totals-value",id:"cart-subtotal",children:e.orderItems.totalPrice})]}),Object(o.jsxs)("div",{className:"totals-item",children:[Object(o.jsx)("label",{children:"Shipping"}),Object(o.jsx)("div",{className:"totals-value",id:"cart-shipping",children:"15.00"})]}),Object(o.jsxs)("div",{className:"totals-item",children:[Object(o.jsx)("label",{children:"Grand Total"}),Object(o.jsx)("div",{className:"totals-value",id:"cart-total",children:+e.orderItems.totalPrice+15})]}),Object(o.jsx)("button",{className:"Btn",onClick:function(){return m(e._id)},children:"Completed"}),Object(o.jsx)("button",{className:"Btn",onClick:function(){return m(e._id)},children:"Delete"})]},e._id)})),Object(o.jsxs)("div",{className:"orders",children:[Object(o.jsx)("h1",{children:"Orders"}),Object(o.jsx)("ul",{children:b})]}))}}}]);
//# sourceMappingURL=7.68ee93dc.chunk.js.map
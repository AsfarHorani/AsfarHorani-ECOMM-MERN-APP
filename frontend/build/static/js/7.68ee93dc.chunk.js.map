{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/orders/orders.js"],"names":["_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","unsupportedIterableToArray","TypeError","Order","props","useState","orders","setOrders","loading","setLoading","token","localStorage","getItem","useEffect","fetch","process","headers","Authorization","then","res","console","log","status","history","replace","Error","json","resData","catch","catchError","ordersArray","deleteOrderHandler","orderId","method","updatedOrders","filter","order","_id","asOverlay","map","orderItems","items","item","className","product","title","price","quantity","name","address","time","id","totalPrice","onClick"],"mappings":"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","file":"static/js/7.68ee93dc.chunk.js","sourcesContent":["import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React,{useState,useEffect} from 'react';\r\nimport './orders.css'\r\nimport LoadingSpinner from '../UI components/LoadingSpinner';\r\n\r\nconst Order =props=> {\r\n\r\n   const [orders,setOrders]= useState([]);\r\n   \r\n   const [loading,setLoading] = useState(false)\r\n\r\n   const token = localStorage.getItem('token');\r\n\r\n   useEffect(()=>{\r\n       \r\n      setLoading(true)\r\n     \r\n      fetch(process.env.REACT_APP_BACKEND_URL+'get-orders',{\r\n          \r\n          headers:{\r\n            \r\n                Authorization: 'Bearer ' + token,\r\n            }\r\n      }).then(res=>{\r\n          console.log(props.token)\r\n          if(res.status===401)\r\n          {\r\n            props.history.replace('/')\r\n            const error = new Error('You are unauthorized!');\r\n            throw error\r\n           \r\n          }\r\n          if(res.status===500){\r\n            const error = new Error('An error occured!');\r\n            throw error\r\n           }\r\n          if(res.status!==200 && res.status!==201){\r\n              const error = new Error('Could not fetch Orders');\r\n              throw error\r\n          }\r\n          return res.json()\r\n      }).then(resData=>{\r\n          console.log(resData)\r\n          setOrders(resData.orders)\r\n          setLoading(false)\r\n        \r\n      }).catch(err=>{\r\n          console.log(err)\r\n          setOrders([])\r\n          props.catchError(err)\r\n          setLoading(false)\r\n      })\r\n  },[token])\r\n\r\n const deleteOrderHandler=(orderId)=>{\r\n  setLoading(true)\r\n  fetch(process.env.REACT_APP_BACKEND_URL+`delete-order/${orderId}`,\r\n  {\r\n    method: \"DELETE\",\r\n    headers:{Authorization: 'Bearer ' + props.token}\r\n  }\r\n  ).then(res=>{\r\n    if(res.status!==200 && res.status!==201){\r\n      throw new Error ('Delete product failed')\r\n    }\r\n    return res.json()\r\n}).then(resData=>{\r\n    console.log(resData)\r\n    let updatedOrders = orders.filter(order=>order._id!==orderId)\r\n    setOrders(updatedOrders)\r\n    setLoading(false)\r\n}).catch(err=>{\r\n    console.log(err)\r\n    setLoading(false)\r\n    props.catchError(err)\r\n})\r\n\r\n }\r\n  \r\n    \r\n        let ordersArray;\r\n        if(loading)\r\n        {\r\n            return (<LoadingSpinner asOverlay/>)\r\n        }\r\n        \r\n        if(orders.length===0 )\r\n        {\r\n           return ordersArray = <h1>No orders</h1>\r\n        }\r\n      \r\n        ordersArray = orders.map(order=>{\r\n            console.log( order.orderItems.items)\r\n            const items = order.orderItems.items.map(item=>{\r\n              \r\n                return(<li key={item.product._id}>\r\n                 <div className=\"product\">\r\n        \r\n            <div className=\"product-details\">\r\n              <div className=\"product-title\">{item.product.title}</div>\r\n            \r\n            </div>\r\n            <div className=\"product-price\">{item.product.price}</div>\r\n            <div className=\"product-quantity\">\r\n            {item.quantity}\r\n            </div>\r\n           \r\n            <div className=\"product-line-price\">{item.product.price * item.quantity}</div>\r\n          </div>\r\n                </li>)\r\n                \r\n                  \r\n            })\r\n            return( \r\n                <li key={order._id} className='orders__item'>\r\n                    <h3>\r\n                        Order - {order._id}\r\n                       \r\n                    </h3>\r\n                    <h3> Name: {order.name}</h3>\r\n                    <h3> Adress: {order.address}</h3>\r\n                    <h3>Time: {order.time}</h3>\r\n\r\n                    <ul className=\"orders__products-item\">\r\n                    <div className=\"column-labels\">\r\n        \r\n        <label className=\"product-details\">Product</label>\r\n        <label className=\"product-price\">Price</label>\r\n        <label className=\"product-quantity\">Quantity</label>\r\n    \r\n        <label className=\"product-line-price\">Total</label>\r\n      </div>\r\n                            {items}\r\n     \r\n                            \r\n                    </ul>\r\n\r\n         \r\n         <div className=\"totals-item\">\r\n           <label>Subtotal</label>\r\n      <div className=\"totals-value\" id=\"cart-subtotal\">{order.orderItems.totalPrice}\r\n        </div>\r\n        </div>\r\n                    <div className=\"totals-item\">    \r\n      <label>Shipping</label>\r\n      <div className=\"totals-value\" id=\"cart-shipping\">15.00</div>\r\n    </div>\r\n    <div className=\"totals-item\">\r\n      <label>Grand Total</label>\r\n      <div className=\"totals-value\" id=\"cart-total\">{+order.orderItems.totalPrice + 15.00}</div>\r\n    </div>\r\n    <button className='Btn' onClick={()=>deleteOrderHandler(order._id)}>Completed</button>\r\n    <button className='Btn' onClick={()=>deleteOrderHandler(order._id)}>Delete</button>\r\n    \r\n                </li>)\r\n            })\r\n        return ( <div className=\"orders\">\r\n        <h1>Orders</h1>\r\n    <ul >\r\n        {ordersArray}\r\n    </ul>\r\n    </div>)\r\n       \r\n    }\r\n\r\n\r\n\r\nexport default Order"],"sourceRoot":""}